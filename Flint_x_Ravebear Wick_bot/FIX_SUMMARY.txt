OKX WICK DETECTOR - FIX SUMMARY
================================

WHAT WAS BROKEN:
‚ùå Symbol format: "ETH-USDT" 
‚ùå OKX error: "channel:candle1m,instId:ETH-USDT doesn't exist"
‚ùå Spot pairs don't have reliable 1m candle data on OKX public API

WHAT'S FIXED:
‚úÖ Symbol format: "BTC-USDT-SWAP" (default)
‚úÖ Uses perpetual SWAP contracts (guaranteed 1m data)
‚úÖ Better error handling shows valid format examples
‚úÖ Auto-reconnect logic improved
‚úÖ Absolute database path (no more "file not found" errors)

HOW TO USE:
-----------

1. Download: okx_wick_detector_FIXED.py

2. Install requirements:
   pip install websockets

3. Run:
   python okx_wick_detector_FIXED.py

4. Change symbol (if needed):
   Open file, find line ~365:
   detector = OKXWickDetector("BTC-USDT-SWAP")
   
   Change to:
   detector = OKXWickDetector("ETH-USDT-SWAP")
   detector = OKXWickDetector("SOL-USDT-SWAP")
   etc.

VALID SYMBOLS:
--------------
‚úÖ BTC-USDT-SWAP (Bitcoin perpetual)
‚úÖ ETH-USDT-SWAP (Ethereum perpetual)
‚úÖ SOL-USDT-SWAP (Solana perpetual)
‚úÖ AVAX-USDT-SWAP (Avalanche perpetual)
‚úÖ MATIC-USDT-SWAP (Polygon perpetual)
‚úÖ DOGE-USDT-SWAP (Dogecoin perpetual)

NOTE: Always use -SWAP suffix for perpetual contracts!

WHAT TO EXPECT:
---------------

Console output:
‚úÖ Database initialized: /path/to/wick_data.db
‚ö° HEALTH CHECK
‚úÖ WebSocket connection successful
‚úÖ Subscribed to BTC-USDT-SWAP 1m candles
‚úÖ Streaming live data...

üî• WICK | 2025-10-25 12:34:00 | O:67890.5 H:68000.2 L:67850.3 C:67920.1
   ‚îî‚îÄ UPPER wick | Upper: 80.1 | Lower: 40.2 | Sequence: 1/5

üìä No wick | 2025-10-25 12:35:00 | O:67920.1 H:67950.5 L:67900.2 C:67940.3

When 5 consecutive wicks detected:
====================================================================
üéØ 5 CONSECUTIVE WICKS DETECTED!
====================================================================
  1. 2025-10-25 12:30:00 | LOWER | Upper: 20.5 | Lower: 85.2
  2. 2025-10-25 12:31:00 | UPPER | Upper: 90.1 | Lower: 30.4
  3. 2025-10-25 12:32:00 | LOWER | Upper: 15.3 | Lower: 70.8
  4. 2025-10-25 12:33:00 | UPPER | Upper: 95.2 | Lower: 25.1
  5. 2025-10-25 12:34:00 | LOWER | Upper: 10.5 | Lower: 80.3
====================================================================

DATABASE:
---------
All wicks saved to: wick_data.db
Location: Same directory as script
Structure: timestamp, symbol, OHLC, wick stats, sequence position

TROUBLESHOOTING:
----------------

If you still get errors:

1. Check symbol format has -SWAP
2. Try BTC-USDT-SWAP (most liquid, always works)
3. Check internet connection
4. Make sure websockets installed: pip install websockets

NEXT STEPS:
-----------

Once working, you can:
‚Ä¢ Let it run overnight to build wick database
‚Ä¢ Query database for patterns
‚Ä¢ Compare to your Bookmap untouched levels
‚Ä¢ Add USDT.D correlation logic
‚Ä¢ Build whale-intel MCP integration
